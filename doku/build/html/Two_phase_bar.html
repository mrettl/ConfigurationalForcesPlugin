<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>Two-phase bar &mdash; ConF3D 0.1 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="_static/css/spc-extend.css">
    <link rel="stylesheet" href="_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="genindex.html" >
    <link rel="search" title="Search" href="search.html" >
    <link rel="top" title="ConF3D 0.1 documentation" href="index.html" > 
  </head>
  <body>

  <div class="container">
    <div class="header">
    </div>
  </div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
	
        <li class="active"><a href="index.html">ConF3D 0.1 documentation</a></li>
	 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="py-modindex.html" title="Python Module Index"
           >modules</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="two-phase-bar">
<span id="id1"></span><h1>Two-phase bar<a class="headerlink" href="#two-phase-bar" title="Permalink to this headline">¶</a></h1>
<p>In this example, configurational forces (CF) are calulated at an material interface. CF are pointing towards the material with the lower stiffness.
The model sketch is shown in Figure 1.</p>
<div class="figure align-default">
<img alt="_images/102_Two_phase_bar.svg" src="_images/102_Two_phase_bar.svg" /></div>
<p>The model consists of two quadrilateral plane strain elements with a thickness of 1 mm. The left and right side have a Young’s modulus of <span class="math notranslate nohighlight">\(E_{1}=210\,\mathrm{GPa}\)</span>
and <span class="math notranslate nohighlight">\(E_{2}=E_{1}/2 = 105\,\mathrm{GPa}\)</span> respectively.
The Poisson’s ratio is set to zero to match the 1D-case where an analytical solution is available <a class="footnote-reference brackets" href="#id3" id="id2">1</a>.
The bar is fixed on the left side, on the right side a displacement of <span class="math notranslate nohighlight">\(u=0.1\,\mathrm{mm}\)</span> is applied.</p>
<p><span class="math notranslate nohighlight">\(G=\frac{u^2 E_1 E_2 A [E_2 - E_1]}{l^2[E_1+E_2]^{2}} = 11.67\,\mathrm{N}\)</span></p>
<div class="section" id="working-example">
<h2>Working example<a class="headerlink" href="#working-example" title="Permalink to this headline">¶</a></h2>
<p>This example demonstrates the evaluation of configurational forces from an Abaqus output database. Alternatively, the results of the FE-calculation
(nodal coordinates, element connectivity, displacement, stress, plastic energy, elastic energy)
are provided within this documentation. Additionally a Abaqus cae file and a Abaqus input file is provided with this example.
Therefore, the extraction of the FE-results is optional.</p>
<p><strong>Extraction of necessary input data</strong></p>
<p>The Abaqus Python script <code class="code docutils literal notranslate"><span class="pre">get_Data_from_abq.py</span></code> extracts all necessary data from the Abaqus output database (odb file).
The compiled functions for configurational force evaluation are element-dependent, therefore the results have to be extracted on a per-element basis.
In this example, only linear quadrilateral plane-strain elements with reduced integration (CPE4R) are used.</p>
<p>The provided script outputs the data in a Numpy .npz file format. If some results are not available, e.g. plastic strain for a linear elastic calculation,
an array filled with zeros with the shape described below have to be generated. The same applies for other inputs, e.g. the stress vector must always be of shape 6, regardless of the calculation.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Coords</dt><dd><p>Numpy nd-array of shape (number of elements, number of nodes per element,3)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Element Connectivity</dt><dd><p>Numpy nd-array of shape (number of elements, number of nodes per element)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Displacements</dt><dd><p>Numpy nd-array of shape (number of time-steps, number of elements, number of nodes per element,3)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Stress</dt><dd><p>Numpy nd-array of shape (number of time-steps, number of elements, number of integration points per element,6)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Plastic energy</dt><dd><p>Numpy nd-array of shape (number of time-steps, number of elements, number of integration points per element)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Strain energy</dt><dd><p>Numpy nd-array of shape (number of time-steps, number of elements, number of integration points per element)</p>
</dd>
</dl>
</li>
</ul>
<p><strong>Calculation of configurational forces</strong></p>
<p>In the following step, the script <code class="code docutils literal notranslate"><span class="pre">Calculate_CF.py</span></code> evaluates the configurational forces for all available time steps. The function call <code class="code docutils literal notranslate"><span class="pre">calc_Conf_Force_[Element</span> <span class="pre">type]</span></code> is element-dependent.
If there are multiple element types in the model, the corresponding function for each element type has to be called seperately.
First, CFs are calculated at element nodal position. In a subsequent step, nodal unique values can be calculated by calling the function <code class="code docutils literal notranslate"><span class="pre">calc_Nodal</span></code>. This function accepts both Numpy nd-arrays
if only one element type is present in the model or a list of Numpy nd-arrays for multiple element types. Note that node labels within the model must be unique. A part/assembly structure is therefore only
possible if a node label only occurs once in a model. In Abaqus CAE, the option “Do not use parts and assemblies in input files” is recommended to avoid this issue entirely.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Node_Labels</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">Element_Connectivity</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#calculate configurational forces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CF_Nodal</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">Element_U</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">Node_Labels</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Element_U</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># Calculate on element nodal position</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">CF_Element_Nodal</span><span class="o">=</span><span class="n">cf</span><span class="o">.</span><span class="n">calc_Conf_Force_CPE4R_static</span><span class="p">(</span><span class="n">Coords</span><span class="p">,</span><span class="n">Element_U</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">S_vec</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">PENER</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">SENER</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;dbf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># Get nodal unique value</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">Node_labels</span><span class="p">,</span><span class="n">CF_Nodal</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">cf</span><span class="o">.</span><span class="n">calc_Nodal</span><span class="p">(</span><span class="n">Element_Connectivity</span><span class="p">,</span><span class="n">CF_Element_Nodal</span><span class="p">)</span>
</pre></div>
</div>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p><a class="reference external" href="https://doi.org/10.1007/s00466-004-0627-4">Kolling S, Mueller R. On configurational forces in short-time dynamics and their computation with an explicit solver. Comput Mech 2005;35(5):392–9.</a></p>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
          </div>
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Two-phase bar</a><ul>
<li><a class="reference internal" href="#working-example">Working example</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <div>
    <a href="_sources/Two_phase_bar.rst.txt"
       rel="nofollow">Show Source</a>
  </div>
        </div>
      </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2022, Markus Tauscher.
      </li>
      <li>
      Created using <a href="https://www.sphinx-doc.org">Sphinx</a> 3.0.3.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>